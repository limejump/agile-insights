<!DOCTYPE html>

<head>
    <!-- Load d3.js -->
    <script src="https://d3js.org/d3.v5.js"></script>
</head>

<body>
    <h1>Some plots</h1>

    <div id="storypoint-analysis"></div>
    <script>
        d3.json("http://localhost:8888/jira-dataset-from-2020-03-15 00:00:00.json")
        .then((data) => {
            // console.log(data);
            let story_point_time = data.map((value) => {
                return [value["days_taken"], value["storypoints"]]
            });

            const margin = {top: 20, right: 30, bottom: 30, left: 40};
            const height = 400;
            const width = 600;

            var x = d3
                .scaleLinear()
                .domain([0, 10])
                .range([margin.left, width - margin.right])

            var y = d3
                .scaleLinear()
                .domain([0, 80])
                .range([height - margin.bottom, margin.top])

            xAxis = g => g
                .attr("transform", `translate(0,${height - margin.bottom})`)
                .call(d3.axisBottom(x));

            yAxis = g => g
                .attr("transform", `translate(${margin.left},0)`)
                .call(d3.axisLeft(y))

            const svg = d3
                .select("#storypoint-analysis")
                .append("svg")
                    .attr("width", width)
                    .attr("height", height)
                    .attr("viewbox", [0,0,width,height])
            svg
                .append("g")
                .call(yAxis)
            svg
                .append("g")
                .call(xAxis)


            console.log(story_point_time);
            svg
                .append("g")
                .selectAll("dot")
                .data(story_point_time)
                .enter()
                .append("circle")
                    .attr("cx", d => x(d[1]))
                    .attr("cy", d => y(d[0]))
                    .attr("r", d => 5)
        });
    </script>
</body>
